<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Master - Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #1a1a1a;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .balance-card {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            padding: 10px 30px;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* Slot Machine Design */
        .machine-body {
            background: #444;
            border: 8px solid #666;
            border-radius: 40px 40px 15px 15px;
            padding: 20px;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .header-deco {
            width: 180px;
            height: 70px;
            background: #f1c40f;
            margin: -20px auto 15px;
            border-radius: 100px 100px 0 0;
            border: 4px solid #d35400;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #d35400;
            text-shadow: 1px 1px 0 white;
        }

        .slot-window {
            display: flex;
            gap: 10px;
            background: #222;
            padding: 15px;
            border-radius: 10px;
            border: 4px solid #111;
        }

        .reel {
            width: 70px;
            height: 90px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }

        /* Buttons */
        .controls {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .btn {
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            width: 200px;
            padding: 15px;
            border-radius: 50px;
            font-size: 18px;
        }

        .spin-btn {
            background: #e74c3c;
            box-shadow: 0 5px 0 #c0392b;
        }

        .spin-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #c0392b;
        }

        .ad-btn {
            background: #3498db;
            box-shadow: 0 5px 0 #2980b9;
        }

        .btn:disabled {
            background: #7f8c8d !important;
            box-shadow: 0 5px 0 #34495e !important;
            opacity: 0.6;
        }

        #status-msg {
            margin-top: 15px;
            font-weight: bold;
            min-height: 20px;
            color: #f1c40f;
        }

        /* Overlay for Fake Ad */
        #ad-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 100;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <div class="balance-card">$<span id="balance">0.00</span></div>

    <div class="machine-body">
        <div class="header-deco">WINNER SLOT</div>
        <div class="slot-window">
            <div class="reel" id="r1">7</div>
            <div class="reel" id="r2">7</div>
            <div class="reel" id="r3">7</div>
        </div>
    </div>

    <div id="status-msg">Oynamak iÃ§in hak al!</div>

    <div class="controls">
        <button class="btn spin-btn" id="spinBtn" onclick="playSlot()" disabled>Ã‡EVÄ°R (HakkÄ±n Yok)</button>
        <button class="btn ad-btn" id="adBtn" onclick="showAd()">REKLAM Ä°ZLE (+1 HAK)</button>
    </div>

    <div id="ad-overlay">
        <h2 id="ad-timer">Reklam Ä°zleniyor: 5s</h2>
        <p>HakkÄ±n tanÄ±mlanmasÄ± iÃ§in bekle...</p>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let balance = 0.00;
        let spinsLeft = 0;
        
        // Ã–dÃ¼l Tablosu ve Semboller
        const prizeTable = {
            'ðŸ’Ž': 2.00,
            '7': 1.00,
            'ðŸ‹': 0.70,
            'ðŸ””': 0.02,
            'ðŸ’': 0.009
        };
        const symbols = Object.keys(prizeTable);

        const spinBtn = document.getElementById('spinBtn');
        const adBtn = document.getElementById('adBtn');
        const statusMsg = document.getElementById('status-msg');

        // Reklam Ä°zleme Fonksiyonu
        function showAd() {
            const overlay = document.getElementById('ad-overlay');
            const timerText = document.getElementById('ad-timer');
            overlay.style.display = 'flex';
            adBtn.disabled = true;

            let timeLeft = 5; // 5 saniyelik simÃ¼le reklam
            const interval = setInterval(() => {
                timeLeft--;
                timerText.innerText = `Reklam Ä°zleniyor: ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    overlay.style.display = 'none';
                    spinsLeft++;
                    updateUI();
                    statusMsg.innerText = "Hak tanÄ±mlandÄ±! Ã‡evirebilirsin.";
                    tg.HapticFeedback.notificationOccurred('success');
                }
            }, 1000);
        }

        function updateUI() {
            document.getElementById('balance').innerText = balance.toFixed(3);
            if (spinsLeft > 0) {
                spinBtn.disabled = false;
                spinBtn.innerText = `Ã‡EVÄ°R (${spinsLeft} Hak)`;
                adBtn.disabled = false;
            } else {
                spinBtn.disabled = true;
                spinBtn.innerText = "Ã‡EVÄ°R (HakkÄ±n Yok)";
                adBtn.disabled = false;
            }
        }

        function playSlot() {
            if (spinsLeft <= 0) return;
            
            spinsLeft--;
            updateUI();
            spinBtn.disabled = true;
            statusMsg.innerText = "ÅžansÄ±n dÃ¶nÃ¼yor...";

            let count = 0;
            const reels = [document.getElementById('r1'), document.getElementById('r2'), document.getElementById('r3')];
            
            const shuffle = setInterval(() => {
                reels.forEach(r => {
                    r.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                });
                count++;
                if (count > 15) {
                    clearInterval(shuffle);
                    determineResult(reels);
                }
            }, 70);
        }

        function determineResult(reels) {
            const final = reels.map(r => r.innerText);
            
            // Kazanma kontrolÃ¼
            if (final[0] === final[1] && final[1] === final[2]) {
                const winSymbol = final[0];
                const prize = prizeTable[winSymbol];
                balance += prize;
                statusMsg.style.color = "#2ecc71";
                statusMsg.innerText = `TEBRÄ°KLER! ${winSymbol} ile $${prize} kazandÄ±n!`;
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                statusMsg.style.color = "#f1c40f";
                statusMsg.innerText = "Tekrar dene!";
                tg.HapticFeedback.impactOccurred('medium');
            }
            
            updateUI();
        }
    </script>
</body>
</html>
